\chapter{Miscallenous options to be renamed later}
\noindent

\section{Solver activation}

There is a large number of different ways how solvers need to be activated and deactivated.
Mostly there needs are related to different kinds of multiphysical coupling schemes.
In the solver section one may give the following keywords.
\sifbegin
  \sifitem{Exec Solver}{String}
  The options are \texttt{never, always, before timestep, after timestep, bofore all, after all}. 
  If nothing else is specified the solver is called every time in its order of appearance.
  \sifitem{Exec Interval}{Integer}
  This keyword gives an interval at which the solver is active. At other intervals the solver is not 
  used. 
\sifend



\section{Dirichlet conditions}

In finite element method there are two kinds of boundary conditions. 
The natural boundary condition that may be set by only affecting the r.h.s. of the 
equation and the essential boundary conditions where also the matrix needs to be tampered.
The latter ones are also called Dirichlet boundary conditions. The natural boundary conditions are often
more problem specific so the user is directed to the Models Manual for more details on them.

The typical way to give boundary conditions is to define in the \texttt{Boundary condition}
section the values related to the variable under solution, for example. 
\ttbegin
Boundary Condition 1
  Target Boundaries(2) = 2 3
  Temperature = 273
  Velocity 1 = 1.0
End
\ttend
If the variables are not listed in the keyword listing the user shoul also define the type which 
is \texttt{Real}.

There is also a possibility to define boundary conditions for nodes that are created on the fly.
For example, in the case below the two nodes are given a temperature value. 
\ttbegin
Boundary Condition 2
  Target Nodes(2) = 100 200
  Temperature = 293
End
\ttend
A variation of this technique is to give coordinate values which are transformed into 
nodal indexes corresponding to the nearest nodes at the time of first call. 
\ttbegin
  Boundary Condition 3
  Target Coordinates(3,2) = Real 1.0 1.0 1.0 0.5 1.0 0.0
  Temperature = 300
End
\ttend
In the above the keyword dimension is \texttt{Target Boundaries(n,DIM)}.
One should not mix
the conditions defined by \texttt{Target Boundaries}, \texttt{Target Nodes}, and
\texttt{Target Coordinates} in the same boundary condition definition. 

\subsection*{Conditions for bodies}

Usually the Dirichlet conditions are given at objects which have a lower dimension than the 
leading dimension in the geometry, i.e. for 3D problems values are usually fixed only at 2D faces.
However, it is possible also to set the conditions for the bodies. This may be done in the 
\texttt{Body force} section just in the same way as in the \texttt{Boundary condition} section normally. 
\ttbegin
Body Force 1 
  Temperature = 273
  Velocity 1 = 1.0
End
\ttend
When the body force is assigned to a body the values will be fixed as defined. 


\subsection*{Conditional Dirichlet conditions}

Sometimes the Dirichlet conditions should depend on other variables in a way which 
defined whether or not to set the conditions at all. For example, the temperature at a 
boundary should be defined only if the flow is inside the boundary. For outflow the definition
of the temperature is not physically justified. For this kind of purposes the user may give a condition 
that is a \texttt{Real} valued variable that has the name of the field variable followed 
by a string \texttt{Condition}. If this variable is positive the Dirichlet condition is applied,
otherwise not. For example, 
\ttbegin
Boundary Condition 1
  Target Boundaries(2) = 2 3
  Temperature = 273
  Temperature Condition = Equals Velocity 1 
End
\ttend
would define the temperature only if the \texttt{Velocity 1} would be positive.


\section{Nodal loads}

Similarly to the Dirichlet values one may also set nodal loads. These are values that 
relate directly to the matrix structure. The information is also mesh dependent. 
There are, however, some uses also for nodal info. For example, in multiphysical couplings
sometimes it may be a good solution to transfer the forces directly in nodal form as this is 
the most accurate wat to compute the forces resulting from the discrete system. 

The nodal loads are given exactly as the Dirichlet conditions except that 
a string \texttt{Load} is attached to the name of the variable, for example
\ttbegin
Boundary Condition 1
  Target Boundaries(2) = 2 3
  Temperature Load = Real 1.0
End
\ttend
This may be used also for the on-the-fly conditions created by the \texttt{Target Nodes} and 
\texttt{Target Coordinates} keywords, and to the conditions in the body force section.



\section{Periodic boundary conditions}

The periodic boundary conditions in Elmer qre very flexible. In fact they may even be antiperiodic. 
In the \texttt{Boundary Condition} section the following keywords are used to activate the 
periodic BCs.
\sifbegin
  \sifitem{Periodic BC}{Integer}  
   This refers to the counterpart of the periodic boundary condition. This means that 
   periodic boundaries come in pairs, and for the other boundary you only need to give pointer to.
   \sifitem{Anti Periodic BC}{Integer}  
   The system may be also antiperiodic i.e. the absolute value is the same but the sign is different.
   \sifitem{Periodic BC Translate(3)}{Real}
   The periodic boundary is mapped to the other boundary by three different operations: 
   translation, rotatition and scaling. This generality is not usually needed and therefore 
   default value is used. For the translation vector the default is the vector that is obtained when 
   moving in the normal direction of the first boundary until the target boundary is hit. 
   If this is not desired the user may give another translation vector using this keyword.
   \sifitem{Periodic BC Rotate(3)}{Real}
   By default no rotation is performed prior to the mapping of values. This keyword may be used to give 
   the angles of rotation. 
  \sifitem{Periodic BC Scale(3)}{Real}
  By default there is no scaling performed prior to the mapping of values. This keyword may be used to give 
  a scaling vector if this is desired.
  \sifitem{Periodic BC Temperature}{Logical True}
  The user should define the variables that are to be periodic in nature. 
  This is done by attaching their names into logical expressions following 
  the string \texttt{Periodic BC}.
\sifend




%Toimii nyt myös StressSolve:n osalta myös transienttina tuo 'Constant Bulk System' olettaen, että r-ehdot eivät
%mökköile massaa ja vaimennusta. Eli jos vain r-ehdoissa on epälineaarisuuksia, eikä ole r-ehto vaimennuksia
%niin voipi laittaa vaikka nuo molemmat:

%Constant Bulk System = Logical True
%Linear System Refactorize = Logical False

%Mesh Update 1 DOFs = Equals Displacment 1
%Displacement Load 1 DOFs = Equals Stress 1


%Variable = a[b:n...]
%ja n on 2 tai 3 niin tulee .ep fileeseen vector-määreellä.
%eihän tuota ehkä ihan aina haluasi ;-)

%Laitoin sellaisen option, että voi antaa ratkaisun komponenteille nimet:
%Variable = flow[Velo:2 Pres:1]

%esimerkiksi. Siis oletusnimien
%Flow 1, Flow 2, Flow 3
%sijaan tulee muuttujalistaan komponenttinimet
%Velo 1, Velo 2 ja Pres

%Variable DOFs avainsanaa, tai -dofs optiota ei tarvitse antaa, eikä
%kannata ettei mene vahingossa sikinsokin...




\bibliography{elmerbib}
\bibliographystyle{plain}

