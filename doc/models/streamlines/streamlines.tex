\Chapter{\Idx{Streamlines}}
\noindent
\modinfo{Module name}{\Idx{StreamSolver}}
\modinfo{Module subroutines}{StreamSolver}
\begin{versiona}
\modinfo{Module authors}{Mika Juntunen}
\modinfo{Document authors}{Mika Juntunen}
\modinfo{Document edited}{July 30th 2003}

\section{Introduction}

Streamline is a line in flow whose tangent is parallel to velocity field
$\vec u$ of the flow in every point $\vec x$. It should be noted that the path of 
material is generally not the same as streamlines. There is also third set
of closely related lines, namely streak lines. On certain streak line
lie all those flow elements that at some earlier instant passed through
certain point in domain. Of course, the streak lines are generally different
than streamlines but when the flow is steady all three set of lines coincide.

Streamlines are mainly used in providing a picture of the flow field. 
Drawing streamlines so that neighbouring streamlines differ by the same amount, 
gives a picture where direction and magnitude change of flow are clearly prescribed.

\section{Theory}

We are restricted here to the incompressible, steady flow in 2D geometry.
The geometry may be 3D, but it must effectively be 2D as in axis symmetric
geometry.

In 2D cartesian geometry stream function $\psi$ is defined
\begin{equation}\label{e:def2d}
u \, = \, \frac{\partial \psi}{\partial y} \, , \quad
v \, = \, - \frac{\partial \psi}{\partial x} \,.
\end{equation}
Here the geometry is $(x,y)$ and the corresponding flow is $\vec u = (u,v)$.
Let $\Omega$ be the domain of the flow and $\vec v$ a test function for the flow.
Definition~\eqref{e:def2d} leads to finite element approximation
\begin{equation}\label{e:fem2D}
\int_\Omega \nabla \psi \cdot \vec v \, \text{d}\Omega
=
\int_\Omega \vec u^\perp \cdot \vec v \, \text{d}\Omega
\end{equation}

In axis symmetric geometry the mass conservation calculated in a diffenrent way.
This leads to following definition for stream function. 
\begin{equation}\label{e:def_axis}
u \, = \, \frac{1}{r}\frac{\partial \psi}{\partial r} \, , \quad
v \, = \, - \frac{1}{r}\frac{\partial \psi}{\partial z} \,
\end{equation}
where the cylinderical coordinates are $(z,r,\phi)$, velocity components
are $(u,v,w)$ and axis of symmetry is $z$ i.e. $r=0$.
This function is sometimes called the \emph{\Idx{Stokes stream function}} 
and it is not as informative as the stream function in cartesian case.
Of course the finite element approximation is a bit different.
\begin{equation}
\int_\Omega \nabla \psi \cdot \vec v \, \text{d}\Omega
=
\int_\Omega \vec u^\perp \cdot \vec v r \, \text{d}\Omega
\end{equation}
Here the $\phi$ component of the flow is excluded.

From definitions~\eqref{e:def2d} and~\eqref{e:def_axis} it is apparent that 
stream function is constant along the streamlines. So drawing the contours 
of stream function gives the streamlines.

\section{Limitations}

Some limitations of the current implementation:
\begin{itemize}

\item The flow field is asumed to be incompressible.

\item There is no dependency on time. Solver can be used in transient cases, but
it only produces the streamlines of the current flow field as if it was steady. 

\item Only 2D cartesian and axis symetric coordinate systems are implemented.

\item Solver gets the velocity field from user defined variable. In cartesian case
it assumes that first degree of freedom is the $x$-component and the second is the
$y$-component of the velocity. In axis symmetric case it assumes that the first
degree of freedom is the $r$-component and the second is the $z$-component of
the velocity field.

\item User can define the node whose value is first set to zero. This \emph{shouldn't}
have affect on results if the normal stream function is used in cartesian coordinates
and Stokes stream function in axis symmetric coordinates. However, if used stream function
is forced to something else, the position of the first node usually has a large
effect on results. 
This is because the mass conservation is calculated differently.

\end{itemize}


\section{Keywords}
\end{versiona}


\sifbegin
  \sifitemnt{Simulation}{}
  \sifbegin
    \sifitem{Coordinate System}{String} 
    The coordinate system should be set to be one of the following options:
    {\tt Cartesian 2D}~~ or~~ {\tt Axi Symmetric}. 
  \sifend

  \sifitem{Solver}{solver-id} 
  All the keywords beginning {\tt Linear System} can be used. 
  They are explained elsewhere. 
  \sifbegin
    \sifitem{Equation}{String}
    The name you want to give to the solver, for example {\tt StreamSolver}.

    \sifitem{Procedure}{File "StreamSolver"\ "StreamSolver"} 
    The name of the file and subroutine.

    \sifitem{Variable}{String}
    The name you want to call the solution, for example {\tt StreamFunction}.

    \sifitem{Variable Dofs}{Integer 1}
    The degree of freedom of the variable. Stream function is scalar so this must be set to 1.
 
    \sifitem{Stream Function Velocity Variable}{String}
    The name of the velocity field variable. FlowSolvers solution is
    called {\tt Flow Solution} and this is also the default value.

    \sifitem{Stream Function First Node}{Integer}
    Number of the node that is first set to zero. Non-positive values are set to 1 and
    too large values are set to largest possible i.e. 'the last node'. Default is 1.

    \sifitem{Stream Function Shifting}{Logical}
    Shift the smallest value to zero. Default is {\tt True}.

    \sifitem{Stream Function Scaling}{Logical}
    Scale largest absolut value to 1. Default is {\tt False}.

    \sifitem{Stokes Stream Function}{Logical}
    This keyword forces the stream function type regardles of the coordinate system.
    If the coordinate system is axis symmetric, then the default is {\tt True},
    else the default is {\tt False}.
  \sifend
\sifend

%\bibliography{elmerbib}
%\bibliographystyle{plain}


