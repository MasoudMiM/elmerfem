<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE edf>
<edf version="1.0" >
   <ALL Widget="" >
      <Name>Stuff for all 'Solvers'</Name>
      <Solver>
         <Parameter Widget="Combo" >
            <Name> Execute Solver </Name>
            <Type> String </Type>
            <Whatis>The ElmerSolver executes this specific solver at times specified by this solver. Default value is to execute 'Always' meaning at every coupled iteration step.</Whatis>
            <StatusTip>Change when this solver is executed.</StatusTip>
            <Item Type="Active" > <Name> Always </Name> </Item>
            <Item> <Name> Before Simulation </Name> </Item>
            <Item> <Name> After Simulation </Name> </Item>
            <Item> <Name> Before Timestep </Name> </Item>
            <Item> <Name> After Timestep </Name> </Item>
            <Item> <Name> Never </Name> </Item>
         </Parameter>
      </Solver>
   </ALL>

   <PDE Name="General" >
      <Name>General</Name>
      <Equation>
      </Equation>

      <Material>
         <Parameter Widget="Label" >
            <Name> Properties </Name>
         </Parameter>

         <Parameter Widget="Edit" >
            <Name> Density </Name>
            <Whatis>Density value may be entered here. Some models, like the ideal gas model compute density internally. In such case this value may not be necessery.</Whatis>
            <StatusTip>Give value to density.</StatusTip>
         </Parameter>

         <Parameter Widget="Edit" >
            <Name> Heat Capacity </Name>
            <Whatis>Specific heat capacity value may be entered here.</Whatis>
            <StatusTip> Set value to specific heat capacity </StatusTip>
         </Parameter>

         <Parameter Widget="Edit" >
            <Name> Specific Heat Ratio </Name>
            <Whatis> The ratio of specific heats (in constant pressure versus in constant volume) may be given with this keyword. The default value of this setting is 5/3, which is the appropriate value for monoatomic ideal gas. </Whatis>
         </Parameter>

         <Parameter Widget="Edit" >
            <Name> Reference Temperature </Name>
            <Whatis> Reference temperature value for various situations.</Whatis>
            <StatusTip> Set value to reference temperature.</StatusTip>
         </Parameter>

         <Parameter Widget="Edit" >
            <Name> Reference Pressure </Name>
            <Whatis> Reference pressure for compressible flow computations.</Whatis>
            <StatusTip> Set value to reference pressure.</StatusTip>
         </Parameter>

         <Parameter Widget="Edit" >
            <Name> Heat expansion Coeff.</Name>
            <SifName> Heat expansion Coefficient</SifName>
            <Whatis> Material heat expansion coefficient.</Whatis>
            <StatusTip> Set value to heat expansion coefficient.</StatusTip>
         </Parameter>
      </Material>
   </PDE>
   <PDE Name="Heat Equation" >
      <Name>Heat Equation</Name>

      <Equation>
        <Parameter Widget="Combo"> 
          <Name> Phase Change Model </Name>
          <Type> String </Type>
          <Item Type="Active"> <Name> None </Name> </Item>
          <Item> <Name> Spatial 1 </Name> </Item>
          <Item> <Name> Spatial 2 </Name> </Item>
          <Item> <Name> Temporal </Name> </Item>
          <Whatis> One of: None, Spatial 1, Spatial 2 and Temporal. Note that when solidification is modelled, the enthalpy-temperature- and viscosity-temperature-curves must be defined in the material section. </Whatis>
        </Parameter>

        <Parameter Widget="Label" >
           <Name> Convection </Name>
        </Parameter>
        <Parameter Widget="Combo" >
            <Type> String </Type>
            <Name> Convection </Name>
            <Item Type="Active" > <Name> None </Name> </Item> <Item>
               <Name> Constant </Name>
               <Activate> /Heat Equation/Equation/Convection Velocity 1 </Activate>
               <Activate> /Heat Equation/Equation/Convection Velocity 2 </Activate>
               <Activate> /Heat Equation/Equation/Convection Velocity 3 </Activate>
            </Item>
            <Item> <Name> Computed </Name> </Item>
         </Parameter>
         <Parameter Widget="Edit" Enabled="False" >
            <Name> Convection Velocity 1</Name>
            <SifName> Material:Convection velocity 1</SifName>
            <Whatis> Convection velocity for 'Constant' convection model. Despite its association, may be space and time varying. </Whatis>
            <StatusTip> Convection velocity </StatusTip>
         </Parameter>
         <Parameter Widget="Edit"  Enabled="False">
            <Name> Convection Velocity 2</Name>
            <SifName> Material:Convection velocity 2</SifName>
            <Whatis> Convection velocity for 'Constant' convection model. Despite its association, may be space and time varying. </Whatis>
            <StatusTip> Convection velocity </StatusTip>
         </Parameter>
         <Parameter Widget="Edit"  Enabled="False">
            <Name> Convection Velocity 3</Name>
            <SifName> Material:Convection velocity 3</SifName>
            <Whatis> Convection velocity for 'Constant' convection model. Despite its association, may be space and time varying. </Whatis>
            <StatusTip> Convection velocity </StatusTip>
         </Parameter>
      </Equation>

      <Solver>
         <Procedure Widget="File" >
            <FileName Widget="String" > HeatSolve </FileName>
            <Function Widget="String" > HeatSolver </Function>
         </Procedure>
         <Variable Widget="Edit" > Temperature </Variable>

         <Parameter Widget="Label">
           <Name> Radiation Factor computation </Name>
           <Whatis>  In some cases the geometry or the emissivities of the radiation boundaries change. This may require the recomputation of the view factors and Gebhardt factors. For that purpose also dynamic computation of the factors is enabled and it is controlled by the keywords below. The radiation factors are also automatically computed if no files for the factors are given allthough radiation boundaries exist. </Whatis>
         </Parameter>
         <Parameter Widget="CheckBox">
            <Name> Update View Factors</Name>
            <Type> Logical </Type>
            <Whatis> The recomputation of the view factors is activated by setting the value of this flag to True.  False is the default. </Whatis>
         </Parameter>

         <Parameter Widget="CheckBox">
            <Name> Update Gebhardt Factors </Name>
            <Type> Logical </Type>
            <Whatis> If the emissivities depend on the solution the Gebhardt factors may need to be recomputed. This is activated by setting giving this flag value True. False is the default. </Whatis>
         </Parameter>
         <Parameter Widget="Edit">
            <Name> Minimum View Factor </Name>
            <Whatis> This keyword determines the cut-off value under which the view factors are omitted. Neglecting small values will not only save memory but also will make the matrix used for solving the Gabhardt factors less dense. This consequently will enable more efficient sparse matrix strategies in solving the Gebhardt factors. The value for this parameter might be of the order 10e-8. </Whatis>
         </Parameter>
         <Parameter Widget="Edit">
           <Name> Minimum Gebhardt Factor</Name>
           <Whatis> The Gebhardt factors make part of matrix dense. By neglecting the smallest Gebhardt factors the matrix structure for the heat equation may become significantly sparser and thus the solution time may drop. The value for this parameter might also be of the order 10e-8. </Whatis>
         </Parameter>
         <Parameter Widget="Edit">
            <Name> Implicit Gebhardt Factor Fraction</Name>
            <Whatis> In computing heat transfer problems with radiation in an implicit manner the matrix structure becomes partially filled. This affects the performance of the linear equation solvers and also increases the memory requirements. On the other hand explicit treatment of radiation slows down the convergence significantly. This keyword allows that the largest Gebhardt factors are treated in an implicit manner whereas the smallest are treated explicitely. The value should lie in between zero (fully explicit) and one (fully implicit). </Whatis>
         </Parameter>
         <Parameter Widget="CheckBox">
           <Name> Matrix Topology Fixed</Name>
           <Type> Logical </Type>
           <Whatis> If the Gebhardt factors change the matrix structure of the heat equation may also have to be changed unless this flag is set to False. Then all factors that do not combine with the matrix structure are omitted. </Whatis>
         </Parameter>
         <Parameter Widget="Edit">
           <Name> View Factors Geometry Tolerance</Name>
           <Whatis> The view factors take a lot of time to compute. Therefore during the iteration a test is performed to check whether the geometry has changed. If the relative maximum change in the coordinate values is less than the value given by this parameter the view factors are not recomputed and the old values are used. </Whatis>
         </Parameter>
         <Parameter Widget="Edit">
           <Name> View Factors Fixed After Iterations </Name>
           <Type> Integer </Type>
           <Whatis> Sometimes the iteration changes the geometry of the radiation boundaries as an unwanted sideeffect. Then the geometry on the radiation boundary may be set fixed after some iterations. In practice this is done by adding suitable Dirichlet conditions in the boundary conditions. </Whatis>
         </Parameter>
         <Parameter Widget="CheckBox">
            <Name>Gebhardt Factors Solver Full</Name>
            <Type> Logical </Type>
            <Whatis> If the view factor matrix is relatively sparse it will make sense to use a sparse matrix equation for solving the Gebhardt factors. This flag may be used if a full matrix should be desired. </Whatis>
         </Parameter>
         <Parameter Widget="CheckBox">
           <Name> Gebhardt Factors Solver Iterative </Name>
           <Type> Logical </Type>
           <Whatis> If the Gebhardt factors are solved from a sparse matrix equation also the type of solver may be selected. The default is direct umfpack solver. Sometimes the memory usage may be a problem or the direct strategy simply not efficient enough. Then an iterative cgs solver may be used instead. </Whatis>
         </Parameter>
      </Solver>

      <BodyForce>
         <Parameter Widget="Label" > <Name> Properties </Name> </Parameter>
        <Parameter Widget="Edit">
           <Name> Heat Source </Name>
           <Whatis> An additional heat source h for the heat equation may be given with this keyword. </Whatis>
        </Parameter>

        <Parameter Widget="CheckBox">
           <Name> Friction Heat </Name>
           <Type> Logical </Type>
           <Whatis>Include frictional heating as a heat source. Default is not to include frictional heating.</Whatis>
        </Parameter>

        <Parameter Widget="CheckBox">
           <Name>Joule Heat </Name>
           <Type> Logical </Type>
           <Whatis> If set True, triggers use of the inductive heating. </Whatis>
        </Parameter>
      </BodyForce>

      <Material>
         <Parameter Widget="Label" > <Name> Properties </Name> </Parameter>
         <Parameter Widget="Edit" >
            <Name> Heat Conductivity </Name>
            <StatusTip> Set value to heat conductivity. </StatusTip>
            <Whatis>Give value to heat conductivity material property.</Whatis>
         </Parameter>
         <Parameter Widget="Edit" >
            <Name> Enthalpy </Name>
            <StatusTip> Set value to enthalpy. </StatusTip>
            <Whatis>Note that, when using the solidification modelling, an enthalpy-temperature curve must be given.  The enthalpy is derived with respect to temperature to get the value of the effective heat capacity. </Whatis>
         </Parameter>
      </Material>

      <InitialCondition>
         <Parameter Widget="Label" > <Name> Properties </Name> </Parameter>
         <Parameter  Widget="Edit">
           <Name> Temperature </Name>
           <Whatis> Give initial value to temperature field. </Whatis>
           <StatusTip> Give initial value to temperature field. </StatusTip>
         </Parameter>
      </InitialCondition>

      <BoundaryCondition>
         <Parameter Widget="Label" > <Name> Dirichlet conditions </Name> </Parameter>
         <Parameter  Widget="Edit">
           <Name> Temperature </Name>
           <Whatis> Give temperature value for this boundary. </Whatis>
           <StatusTip> Give temperature value for this boundary. </StatusTip>
         </Parameter>

         <Parameter Widget="Label" > <Name> Heat Flux conditions </Name> </Parameter>
         <Parameter  Widget="Edit">
           <Name> Heat Flux </Name>
           <Whatis> Give heat flux. </Whatis>
           <StatusTip> Give heat flux. </StatusTip>
         </Parameter>

         <Parameter  Widget="Edit">
           <Name> Heat Transfer Coeff. </Name>
           <SifName> Heat Transfer Coefficient </SifName>
           <Whatis> Give transfer coefficient. </Whatis>
           <StatusTip> Give heat transfer flux. </StatusTip>
         </Parameter>

         <Parameter  Widget="Edit">
           <Name> External Temperature </Name>
           <Whatis> Give external temprature. </Whatis>
           <StatusTip> Give external temperature. </StatusTip>
         </Parameter>

         <Parameter Widget="Label" > <Name> Radiation Settings </Name> </Parameter>

         <Parameter Widget="Combo" >
            <Name> Radiation </Name>
            <Type> String </Type>
            <Item Type="Active" > <Name> None </Name>
            </Item>
            <Item> 
              <Name> Idealized </Name>
              <Activate> /Heat Equation/BoundaryCondition/Emissivity </Activate>
            </Item>
            <Item>
              <Name> Diffuse Gray </Name>
              <Activate> /Heat Equation/BoundaryCondition/Emissivity </Activate>
              <Activate> /Heat Equation/BoundaryCondition/Radiation Target Body </Activate>
              <Activate> /Heat Equation/BoundaryCondition/Radiation Boundary </Activate>
              <Activate> /Heat Equation/BoundaryCondition/Radiation Boundary Open </Activate>
            </Item>
         </Parameter>

	<Parameter Widget="Edit" Enabled="False">
           <Name> Emissivity </Name>
           <Whatis> Emissivity of the radiating surface, required for radiation model is present.</Whatis>
           <StatusTip> Emissivity of the radiating surface, required for radiation model is present.</StatusTip>
         </Parameter>

         <Parameter  Widget="CheckBox" Enabled="False">
           <Name> Radiation Boundary Open </Name>
           <Type> Logical </Type>
           <Whatis> The closures may be partially open. Then no normalization of the view factors is enforced. The missing part of the radiation angle is assumed to be ideal radiation. Therefore if this option is enforced also the parameter External Temperature must be given.  </Whatis>
           <StatusTip> Account for missing space angle to have a full closure. </StatusTip>
         </Parameter>

         <Parameter  Widget="Edit" Enabled="False">
           <Name> Radiation Boundary </Name>
           <Type> Integer </Type>
           <Whatis> If there are many closures with radiation boundary conditions that do not see each other the view factors may be computed separately. This keyword is used to group the boundaries to independent sets. The default is one. </Whatis>
           <StatusTip> Account for missing space angle to have a full closure. </StatusTip>
         </Parameter>

         <Parameter  Widget="Edit" Enabled="False">
           <Name> Radiation Target Body </Name>
           <Type> Integer </Type>
           <Whatis> Normal points to this 'body's direction. </Whatis>
           <StatusTip> Normal points to this 'body's direction. </StatusTip>
         </Parameter>
      </BoundaryCondition>
   </PDE>
   <PDE Name="Linear Elasticity" >
      <Name>Linear elasticity</Name>
      <Solver>
         <Procedure Widget="File" >
            <FileName Widget="String" > StressSolve </FileName>
            <Function Widget="String" > StressSolver </Function>
         </Procedure>
         <Parameter Widget="Real Vector(cdim)" > Displacement </Parameter>
      </Solver>

      <Material>
         <Parameter Widget="Label" > <Name> Properties </Name> </Parameter>
         <Parameter Widget="Edit" >
            <Name>Youngs modulus</Name>
         </Parameter>
         <Parameter Widget="Edit" >
            <Name>Poisson ratio</Name>
         </Parameter>
      </Material>
   </PDE>
</edf>
